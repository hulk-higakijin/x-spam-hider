const { isInvestmentSpam } = require("../content");

describe("isInvestmentSpam", () => {
  test("投資スパムを正しく検出する", () => {
    const spamTexts = [
      `毎日必ずチェックするブロガー
        @leslieagbakini
        最初は嘘だと思ったが、的中率が高過ぎて、
        もうインサイダーかと思った（笑）
        疑ってごめんW W👍👍`,

      `この間金欠の友達が突然金持ちになって、
        聞いてみたら、
        @adriancastro510
        👈✅
        という先生と同じ株買ったら、
        数百万円儲かりました。半信半疑でしばらくみてみると、やっぱり本物だった👍😘🙏`,

      `毎日フォローする金融の達人
      @srlb9u
      初めは疑心暗鬼だったが、相場観が鋭すぎて、
      もう市場の動きを先読みする達人かと疑った（笑）
      信じなかった自分を恥じていますW W`,

      `債務を返済し終えましたの返済ができたのは、
      @FarrahySaja1
      さんの豊富な経験から学べました。
      一か八か助言通りに資金配分してみたら、
      860万円の収益を生み出し、残った資金は次の市場参入のために取っておきます！`,
      
      `先週の暴落  回避できたのは  
      @FarrahySaja1
      さんのお陰です。  
      この人の言葉に背中押された  
      ガチで一生分の感謝  🍀`,

      `借金から解放されましたの返済ができたのは、
      @Erhspv
        
      さんの指南が役立ちました。
      一か八か教えられた相場観に従って行動したら、
      860万円の儲けを手にして、残額は次の勝負に使います！`,
      
      `返済が終わりましたの返済ができたのは、
      @qiraazncvayeox
      さんの適切なアドバイスが実を結びました。
      一か八か推奨されたポートフォリオを真似てみたら、
      860万円の収益を達成し、余った資金は将来の資産運用のために使います！`,

      `貸付金を返せましたの返済ができたのは、
      @FarrahySaja1
        
      さんの提案で救われました。
      一か八か教えてくれた相場情報を参考にしたら、
      860万円儲かったので、残りは次の投資のシードマネーにします！`,
      
      `兄貴が最近ハマったブロガー 
      @discaya_noel
      ☺️😊😇
        
      独特な見解と識見で、いろいろ教えてくれたって、🧐
      夏休みに家族全員旅行するって兄貴が言いました。
      楽しみだね〜� 🌸 🚀`,

      `2ヶ月前にたまたま見前澤友作が言及したブロガーだ
      @Kiercthewssx
      😘😘
      しばらく観察していると、毎日急騰している銘柄を推奨していることが分かりました。🤝🤝
      フォローした後、私も同じ株を買って、476万円稼ぎました
      ありがとうございます个。`,

      `高橋洋一が紹介したこのブロガー 

      @RafiYustian


      数カ月ほど観察してみたところ毎日急騰している銘柄を推奨していることがわかりました

      彼の指導のもと私も同じ株を買って128万円儲けました

      先生には本当に感謝していますお金を稼ぎたいなら、彼に従ってください🐶🐶🐶`,

      `昨年、前澤友作が言及したブロガーだ

      @charry5596

      
      しばらく観察していると、毎日急騰している銘柄を推奨していることが分かりました。

      フォローした後、私も同じ株を買って、160万円稼ぎました。

      ありがとうございます🥴🫵😳`,

      `高橋洋一が紹介したこのブロガー 

      @kintanalvania


      数カ月ほど観察してみたところ毎日急騰している銘柄を推奨していることがわかりました.

      彼の指導のもと私も同じ株を買って128万円儲けました.

      先生には本当に感謝していますお金を稼ぎたいなら、彼に従ってください💚❤️🧡.`,

      `この間の暴落回避できたのは
      @srlb9u
      さんのお陰です。
      この方に出会わないと、今どんな生活してるだろ…
      本当にありがとう！❤️ 💰 💦`,

      `高橋洋一が絶賛！
      @fefoali26

      数ヶ月見ていて確信。毎日急騰銘柄をピタリと的中！
      🍂
      彼の指導で株を買ったら199万円ゲット。
      感謝しかない！稼ぎたいなら今すぐフォロー！
      🎉🚀🍀👍`,

      `今年高橋洋一が取り上げたブロガーはこれだ

      @RafiYustian

      しばらく観察してみると、彼らが推奨した銘柄の株価が毎日急上昇していることがわかりました。

      私も彼の例に倣って同じ株を購入し、180万円の利益を得ました。

      ありがとう🎗️🎗️🎗️`,
      
      `友達が
      @srlb9u
      さんに薦められた株を買わなかったこと後悔してる　笑
      今週ずっと買ったらもう一千万近く儲かれるだって、
      まじうるさいわ　笑 🌺 🎊 🌸` 
    ];

    spamTexts.forEach((spamText) => {
      expect(isInvestmentSpam(spamText)).toBe(true);
    });
  });

  test("通常のツイートはスパムと判定されない", () => {
    const normalText = "今日は良い天気ですね。公園でランチを食べました。";
    expect(isInvestmentSpam(normalText)).toBe(false);
  });

  test("有名人の名前が複数含まれる場合のスコア計算", () => {
    const celebrityText =
      "堀江貴文さんと前澤友作さんの対談がとても参考になりました";
    expect(isInvestmentSpam(celebrityText)).toBe(false); // スコア4（2 * 2）のみなのでfalse
  });

  test("複合的なスパムパターン", () => {
    const complexSpamText =
      "@money_expert 堀江貴文さんの投資アドバイスで30万円稼げました！感謝です🔥";
    expect(isInvestmentSpam(complexSpamText)).toBe(true); // スコア9以上になるのでtrue
  });

  test("金額パターンのテスト", () => {
    const moneyText = "今月は20万円の収入がありました";
    expect(isInvestmentSpam(moneyText)).toBe(false); // スコア2（金額1 + 金融1）のみなのでfalse
  });
});
